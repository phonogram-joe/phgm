{{assign var="id" value=uniqid()}}
{{if !isset($type)}}
  {{assign var="type" value=$model->getType($field)}}
{{/if}}
{{if !isset($htmlClass)}}
  {{assign var="html_class" value=""}}
{{/if}}
<div class="control-group {{if $model->hasError($field)}}error{{/if}}">
  <label class="control-label" for="f_{{$id}}">{{$model->getLabel($field)|escape}}</label>
  <div class="controls">
  {{if $type === 'StringType'}}
    <input type="text" class="{{$htmlClass|escape}}" id="f_{{$id}}" name="{{$field|escape}}" value="{{$model->get($field)|escape}}">
  {{elseif $type === 'DatetimeType'}}
    <div class="input-append">
      <input type="datetime" class="datetime {{$htmlClass|escape}}" id="f_{{$id}}" name="{{$field|escape}}" value="{{$model->get($field)|escape}}" size="16" data-date-format="yyyy-mm-dd"><span class="add-on">日にち</span>
    </div>
  {{elseif $type === 'BooleanType'}}
    {{foreach $labels as $label => $value}}
    {{assign var="id" value=uniqid()}}
    <label class="radio" for="f_{{$id}}">
      <input type="radio" class="{{$htmlClass|escape}}" name="{{$field|escape}}" id="f_{{$id}}" value="{{BooleanType::toWeb($value)}}" {{if $model->val($field) === $value}}checked{{/if}}> {{$label|escape}}
    </label>
    {{/foreach}}
  {{elseif $type === 'IntegerType' or $type === 'DecimalType'}}
    <input type="number" class="{{$htmlClass|escape}}" id="f_{{$id}}" name="{{$field|escape}}" value="{{$model->get($field)|escape}}">
  {{elseif $type === 'MultiLineStringType'}}
    <textarea id="f_{{$id}}" class="{{$htmlClass|escape}}" name="{{$field|escape}}" rows="3">{{$model->get($field)|escape}}</textarea> 
  {{elseif $type === 'PasswordType'}}
    <input type="password" class="{{$htmlClass|escape}}" id="f_{{$id}}" name="{{$field|escape}}" value="{{$model->get($field)|escape}}">
  {{elseif $type === 'EmailType'}}
    <div class="input-append">
      <input type="email" class="{{$htmlClass|escape}}" id="f_{{$id}}" name="{{$field|escape}}" value="{{$model->get($field)|escape}}" size="16"><span class="add-on"><i class="icon-envelope"></i></span>
    </div>
  {{elseif $type === 'PhoneType'}}
    <input type="tel" class="{{$htmlClass|escape}}" id="f_{{$id}}" name="{{$field|escape}}" value="{{$model->get($field)|escape}}">
  {{elseif $type === 'PostcodeType'}}
    <div class="input-append">
      <input type="text" class="{{$htmlClass|escape}}" id="f_{{$id}}" name="{{$field|escape}}" value="{{$model->get($field)|escape}}" size="16"><span class="add-on">〒</span>
    </div>
  {{elseif $type === 'ForeignKeyType'}}
    <select class="{{$htmlClass|escape}}" id="f_{{$id}}" name="{{$field|escape}}">
      <option value="">選択して下さい</option>
    {{foreach $options as $optionModel}}
      <option value="{{$optionModel->id|escape}}" {{if $model->val($field) === $optionModel->id}}selected{{/if}}>{{$optionModel->get($optionsLabel)|escape}}</option>
    {{/foreach}}
    </select>
  {{elseif $type === 'SelectType'}}
    <select class="{{$htmlClass|escape}}" id="f_{{$id}}" name="{{$field|escape}}">
      <option value="">選択して下さい</option>
    {{foreach $options as $label => $value}}
      <option value="{{$value|escape}}" {{if $model->val($field) === $value}}selected{{/if}}>{{$label|escape}}</option>
    {{/foreach}}
    </select>
  {{elseif $type === 'hidden'}}
    <span class="uneditable-input">{{$model->get($field)|escape}}</span>
    <input type="hidden" name="{{$field|escape}}" value="{{$model->get($field)|escape}}">
  {{/if}}
  {{if $model->hasError($field)}}
    <p class="help-block"><i class="icon-exclamation-sign"></i> {{$model->getError($field)|escape}}</p>
  {{/if}}
  {{if isset($hint)}}
    <p class="help-block"><i class="icon-info-sign"></i> {{$hint|escape}}</p>
  {{/if}}
  </div>
</div>
